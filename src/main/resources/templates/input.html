<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="ISO-8859-1">
<title>Insert New or Edit Contact</title>
</head>

<script type="text/javascript">

function checkForm(form)
{
	if(form.name.value == ""){
		alert("Error: Name input is empty!");
		form.name.focus();
		return false;
	}
	if(form.relationship.value == ""){
		alert("Error: Relationship input is empty!");
		form.relationship.focus();
		return false;
	}
	if(form.phone.value == ""){
		alert("Error: Phone number input is empty!");
		form.phone.focus();
		return false;
	}
	
	var re = /^[\w ]+$/;
	

	if(!re.test(form.name.value)){
		alert("Error: Name input contains invalid characters!");
		form.name.focus();
		return false;
	}
	
	if(!re.test(form.relationship.value)){
		alert("Error: Relationship input contains invalid characters!");
		document.form.relationship.focus();
		return false;
	}
	
	if(!re.test(form.phone.value)){
		alert("Error: Phone number input contains invalid characters!");
		document.form.phone.focus();
		return false;
	}
	
	return true;
}

</script>
<body>
<form name="form" th:object="${newContact}" th:action= "@{/update/{id}(id=${newContact.id})}" method=POST action="form-handler" onsubmit="return checkForm(this);">
Name: <input type="text" name="name" size="20" th:field="*{name}"><br />
Relationship: <input type="text" name="relationship" size="20" th:field="*{relationship}"><br />
Phone Number: <input type="text" name="phone" size="20" th:field="*{phone}"><br />
Street: <input type="text" name="address.street" size="20" th:field="*{address.street}"><br />
City: <input type="text" name="address.city" size="20" th:field="*{address.city}"><br />
State: <input type="text" name="address.state" size="20" th:field="*{address.state}"><br />

<input name= "submit" type="submit" value="submit"/>
</form>
<a href="viewAll">View all Contacts</a>

</body>
</html>